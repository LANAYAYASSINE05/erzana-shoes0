{%- comment -%}
  Header Section - Tailwind CSS Only
  No custom CSS, only Tailwind utility classes
{%- endcomment -%}

<header class="sticky top-0 z-50 bg-white shadow-sm" role="banner" data-section-id="{{ section.id }}">
  <!-- Top Bar -->
  {%- if section.settings.show_announcement -%}
    <div class="bg-black text-white py-2 text-sm uppercase tracking-wide">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center">
          <p class="text-gold font-semibold">{{ section.settings.announcement_text | default: "Livraison gratuite à partir de 500 MAD" }}</p>
        </div>
      </div>
    </div>
  {%- endif -%}

  <!-- Main Header -->
  <div class="bg-white border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between gap-4 py-4 relative">
        <!-- Mobile Menu Toggle -->
        <button class="lg:hidden flex items-center justify-center w-10 h-10" aria-label="Menu" aria-expanded="false" data-mobile-menu-toggle>
          <span class="flex flex-col gap-1.5 w-6">
            <span class="block w-full h-0.5 bg-black transition-all"></span>
            <span class="block w-full h-0.5 bg-black transition-all"></span>
            <span class="block w-full h-0.5 bg-black transition-all"></span>
          </span>
        </button>

        <!-- Logo -->
        <div class="absolute left-1/2 transform -translate-x-1/2 flex-shrink-0">
          <a href="{{ routes.root_url }}" class="flex flex-col items-center gap-1">
            <div class="bg-black border-2 border-white px-6 py-2 flex items-center gap-3">
              {%- if section.settings.logo != blank -%}
                <img 
                  src="{{ section.settings.logo | image_url: width: 200 }}" 
                  alt="{{ shop.name | escape }}" 
                  class="max-w-[150px] h-auto"
                  width="{{ section.settings.logo.width }}"
                  height="{{ section.settings.logo.height }}"
                  loading="eager"
                >
              {%- else -%}
                <span class="text-white text-2xl font-bold uppercase tracking-wide">{{ shop.name }}</span>
                {%- if section.settings.logo_icon != blank -%}
                  <div class="w-10 h-10 bg-white p-1 flex items-center justify-center">
                    <img 
                      src="{{ section.settings.logo_icon | image_url: width: 40 }}" 
                      alt=""
                      class="w-full h-full object-contain"
                      width="40"
                      height="40"
                    >
                  </div>
                {%- endif -%}
              {%- endif -%}
            </div>
            {%- if section.settings.logo_tagline != blank -%}
              <p class="text-gold text-xs italic uppercase tracking-wider">{{ section.settings.logo_tagline }}</p>
            {%- endif -%}
          </a>
        </div>

        <!-- Desktop Navigation -->
        <nav class="hidden xl:block flex-1 ml-8" role="navigation" aria-label="Navigation principale">
          <ul class="flex items-center justify-center gap-8 list-none m-0 p-0">
            {%- for link in linklists.main-menu.links -%}
              <li class="relative {% if link.active %}text-gold{% endif %}">
                <a href="{{ link.url }}" class="block py-2 text-black hover:text-gold transition-colors relative">
                  {{ link.title }}
                  <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gold transition-all hover:w-full {% if link.active %}w-full{% endif %}"></span>
                </a>
                {%- if link.links != blank -%}
                  <ul class="absolute top-full left-0 mt-2.5 min-w-[220px] bg-white shadow-lg border border-gold/20 rounded list-none m-0 p-2 opacity-0 invisible -translate-y-2.5 transition-all group-hover:opacity-100 group-hover:visible group-hover:translate-y-0">
                    {%- for childlink in link.links -%}
                      <li>
                        <a href="{{ childlink.url }}" class="block px-4 py-2 text-black hover:bg-gray-100 hover:text-gold transition-colors rounded">
                          {{ childlink.title }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </li>
            {%- endfor -%}
          </ul>
        </nav>

        <!-- Header Actions -->
        <div class="flex items-center gap-4">
          <!-- Search -->
          <button class="relative flex items-center justify-center w-10 h-10 text-black hover:text-gold transition-colors" aria-label="Rechercher" data-search-toggle>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>

          <!-- Account -->
          {%- if shop.customer_accounts_enabled -%}
            <a href="{{ routes.account_url }}" class="flex items-center justify-center w-10 h-10 text-black hover:text-gold transition-colors" aria-label="Mon compte">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 12C5.58172 12 2 14.6863 2 18V20H18V18C18 14.6863 14.4183 12 10 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          {%- endif -%}

          <!-- Cart -->
          <a href="{{ routes.cart_url }}" class="relative flex items-center justify-center w-10 h-10 text-black hover:text-gold transition-colors" aria-label="Panier">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 1H3L3.4 3M5 11H15L19 3H3.4M5 11L3.4 3M5 11L2.70711 13.2929C2.07714 13.9229 2.52331 15 3.41421 15H15M15 11C15 12.1046 15.8954 13 17 13C18.1046 13 19 12.1046 19 11C19 9.89543 18.1046 9 17 9C15.8954 9 15 9.89543 15 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {%- if cart.item_count > 0 -%}
              <span class="absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-gold text-black text-xs font-bold rounded-full flex items-center justify-center">
                {{ cart.item_count }}
              </span>
            {%- endif -%}
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="fixed top-0 left-0 w-full max-w-xs h-screen bg-white shadow-lg -translate-x-full transition-transform z-[1001] overflow-y-auto p-8" data-mobile-menu>
    <nav class="mobile-nav" role="navigation" aria-label="Navigation mobile">
      <ul class="list-none m-0 p-0">
        {%- for link in linklists.main-menu.links -%}
          <li class="border-b border-gray-100">
            <a href="{{ link.url }}" class="block py-4 text-lg font-medium text-black hover:text-gold transition-colors">
              {{ link.title }}
            </a>
            {%- if link.links != blank -%}
              <ul class="list-none m-0 p-0 pl-4">
                {%- for childlink in link.links -%}
                  <li class="border-b border-gray-100">
                    <a href="{{ childlink.url }}" class="block py-3 text-base text-gray-500 hover:text-gold transition-colors">
                      {{ childlink.title }}
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
    </nav>
  </div>

  <!-- Search Overlay -->
  <div class="fixed inset-0 bg-black/90 z-[2000] flex items-center justify-center opacity-0 invisible transition-all" data-search-overlay>
    <div class="w-full max-w-2xl p-8 relative">
      <form action="{{ routes.search_url }}" method="get" class="flex gap-3 mb-8" role="search">
        <input 
          type="search" 
          name="q" 
          class="flex-1 px-6 py-4 text-xl text-white bg-transparent border-2 border-gold rounded outline-none transition-all focus:ring-4 focus:ring-gold/20 placeholder:text-white/60 search-input" 
          placeholder="Rechercher des produits..."
          aria-label="Rechercher"
          autocomplete="off"
        >
        <button type="submit" class="px-6 py-4 bg-gold text-black rounded transition-colors hover:bg-[#B8941F]" aria-label="Soumettre la recherche">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </form>
      <button class="absolute top-8 right-8 w-10 h-10 bg-transparent border-none text-white cursor-pointer transition-colors hover:text-gold" aria-label="Fermer la recherche" data-search-close>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header Tailwind",
  "tag": "header",
  "class": "section-header-tailwind",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo_icon",
      "label": "Icône du logo (optionnel)"
    },
    {
      "type": "text",
      "id": "logo_tagline",
      "label": "Tagline du logo",
      "default": "Chaussures pour être à l'aise"
    },
    {
      "type": "checkbox",
      "id": "show_announcement",
      "label": "Afficher la barre d'annonce",
      "default": true
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Texte de l'annonce",
      "default": "DÉCOUVREZ NOTRE PROMO 3D EXCLUSIVE"
    }
  ]
}
{% endschema %}

